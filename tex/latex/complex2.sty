\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{complex2}[2021/12/25]
\def\true{true}
\def\false{false}

% Package options
\DeclareOption{draft}{
  \def\opdraft\true
}

\ProcessOptions\relax

% Document information
\ifx \doctitle \undefined
  \def \doctitle {Template}
\fi

\ifx \docauthor \underfined
  \def \docauthor {Complex2-老爹}
\fi

\ifx \docdate \underfined
  \def \docdate {\today}
\fi

\ifx \docemail \underfined
  \def \docemail {contact@complex2math.com}
\fi

\ifx \docmotto \underfined
  \def \docmotto {There is more than one way to skin a cat.}
\fi

\title{\doctitle}
\author{\docauthor}
\date{\docdate}

% Basic
\RequirePackage{graphicx}
% disable identation
\set{\parindent}{0pt}

% Chinese support
\RequirePackage{fontspec}
\RequirePackage{xeCJK}
\setCJKmainfont{NotoSerifSC-Light.otf}[
  Path = /usr/local/share/fonts/Noto_Serif_SC/ ,
  BoldFont = NotoSerifSC-SemiBold.otf ,
  ItalicFont = ../ZhongYi/Kaiti.ttf ,
]
\setCJKsansfont{NotoSansSC-Light.otf}[
  Path = /usr/local/share/fonts/Noto_Sans_SC/ ,
  BoldFont = NotoSansSC-Medium.otf ,
  ItalicFont = ../ZhongYi/Kaiti.ttf ,
]
\setCJKmonofont{PingFang.ttf}[
  Path = /usr/local/share/fonts/PingFang/ ,
]

% Enable color
\RequirePackage{xcolor}
\definecolor{fav-red}{HTML}{D2042D}
\definecolor{fav-alt-red}{HTML}{772222}
\definecolor{fav-blue}{HTML}{0437F2}
\definecolor{fav-alt-blue}{HTML}{005577}
\definecolor{fav-green}{HTML}{00A36C}
\definecolor{fav-purple}{HTML}{550077}
\definecolor{fav-magenta}{HTML}{CC00CC}

% Hyperlinks and Reference
\RequirePackage{hyperref}
\hypersetup{
  pdftitle = {\doctitle},
  pdfauthor = {\docauthor},
  pdfcreator = {\docauthor},
  pdfproducer = {XeTeX with hyperref package},
  colorlinks = true,
  linkcolor = {fav-blue},
  citecolor = {fav-green},
  urlcolor = {fav-blue},
  filecolor = {fav-magenta},
}

% Theorem environment
\RequirePackage{amsmath, amsthm, amssymb, tikz-cd}
% This package must be loaded AFTER amsmath
% see https://tex.stackexchange.com/questions/19104/cleveref-with-counters-with-same-name
\RequirePackage[nameinlink]{cleveref}

\newenvironment{soln}[1][Solution]{\begin{proof}[#1]\renewcommand{\qedsymbol}{}}{\end{proof}}
\newenvironment{subproof}[1][Proof]{\begin{proof}[#1]\renewcommand{\qedsymbol}{$\blacksquare$}}{\end{proof}}
\newenvironment{claim}[1][Claim]{\par\medskip\textbf{#1.}\space}{\par}

\ifx\opdraft\true
\newcounter{mathcounter}
\else
\newcounter{mathcounter}[section]
\numberwithin{mathcounter}{section}
\numberwithin{equation}{section}
\fi

\newtheorem{thm}[mathcounter]{Theorem}
\newtheorem{cor}[mathcounter]{Corollary}
\newtheorem{lem}[mathcounter]{Lemma}
\newtheorem{prop}[mathcounter]{Proposition}

\theoremstyle{definition}
\newtheorem{defin}[mathcounter]{Definition}
\newtheorem*{notation}{notation}
\newtheorem{exmp}[mathcounter]{Example}
\newtheorem{prob}{Problem}
\newtheorem{rem}[mathcounter]{Remark}

\crefname{subsection}{subsec}{subsecs}
\Crefname{subsection}{Subsection}{Subsections}
\crefname{thm}{thm}{thms}
\Crefname{thm}{Theorem}{Theorems}
\crefname{lem}{lem}{lems}
\Crefname{lem}{Lemma}{Lemmas}
\crefname{cor}{cor}{cors}
\Crefname{cor}{Corollary}{Corollaries}
\crefname{prop}{prop}{props}
\Crefname{prop}{Proposition}{Propositions}
\crefname{defin}{defin}{defins}
\Crefname{defin}{Definition}{Definitions}
\crefname{exmp}{exmp}{exmps}
\Crefname{exmp}{Example}{Examples}
\crefname{prob}{prob}{probs}
\Crefname{prob}{Problem}{Problems}
\crefname{rem}{rem}{rems}
\Crefname{rem}{Remark}{Remarks}
